<!DOCTYPE html>
<meta charset="utf-8">
<style>

.intersection {
  fill: none;
  stroke: #000;
}

circle {
  stroke: #aaa;
  stroke-dasharray: 5, 5;
  stroke-width: 1px;
  fill: none;
}

path {
  stroke-linecap: butt;
}

.figure {
  pointer-events: none;
  fill-opacity: 0.6;
  stroke-width: 1px;
  stroke: #000;
  fill: none;
}

</style>
<svg width="960" height="500">g</svg>
<script src="https://d3js.org/d3-polygon.v0.2.min.js"></script>
<script src="../build/d3-equidecompose.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script>

var color, svg, line, figure,
    N = 3, vertices, data, polygons,
    width = 960,
    height = 500,
    radius = 220,
    area = 1000,
    count = 0; // number of completed transitions have completed

vertices = sample(area);
target = sample(area);
data = d3_equidecompose.triangles(vertices, vertices.slice().reverse()).sources();

color = d3.scale.category10();

svg = d3.select("svg").append("g");

line = d3.svg.line()
            .x(function(d) { return d[0]; })
            .y(function(d) { return d[1]; })
            .interpolate("linear-closed");          

// decomposition
figure = svg.append("g").attr("class", "collection")
            .selectAll("g")
            .data(data)
         .enter().append("path")
            .style("fill", function(d, i) { return color(i); })
            .attr("class", "figure")
            .attr("d", line);

// circumcircle
svg.append("circle")
    .attr("cx", width / 2)
    .attr("cy", height / 2)
    .attr("r", radius);

function sample(area) {
  // sample triangle vertices from circle centered on viewport
  return d3.range(N).map(function(d, i) {
      var theta = Math.random() * Math.PI * 2;
    return [(width / 2)  + radius * Math.cos(theta), (height / 2)  + radius * Math.sin(theta)];
  });
}
</script>